# 4.0.比较文件的差异和从 Git 文档库取回文件

- **Git 的文件对比指令：“git diff” 和 “git difftool”**

- **比较 Git 仓库中任何两个 commit 版本的差异：`git difftool HEAD HEAD^ poem.txt`。如果要对比全部的文件，可以将文件名改成 “.”，也就是 “git difftool HEAD HEAD^ .”，或是直接省略文件名也可以。**

- **执行 “git diff” 和 “git difftool” 指令时不带任何选项，如果暂存区中有新的版本的话，就会拿暂存区中的版本与工作区中的版本进行对比，否则，将会对比工作区与 Git 仓库中的版本。**

- **“git diff” 和 “git difftool” 加上 “--no-index” 选项是用来对比文件夹中的任何两个文件**

# 4.1.从 Git 文档库中取出文件

- **从 Git 仓库中取出文件使用 “git checkout” 命令**

- **从 Git 仓库中的任何一个 commit 节点取出指定的文件使用该命令：“git checkout commit节点标识符或标签 文件1 文件2 ...”**

-- **执行 “git checkout” 指令时，如果取出的文件和当前 Git 仓库中最新 commit 的文件内容不同，这个取出的文件内容会自动加入 Git 索引中。如果之后我们又执行 “git commit” 指令，这个取出的文件内容就会存入 Git 仓库中称为新的版本。如果要避免这种情况发生，可以在执行 “git checkout” 指令之后，立刻执行 “git reset HEAD”, 撤销对暂存区的更改。**

- **如果执行 “git checkout” 指令时没有指定 commit 节点，也就是使用以下格式：**
  
  `git checkout 文件1 文件2`
  
  Git 会先找索引中有没有该文件，如果有就把它取出；如果没有就从最新的 commit 节点开始，按照时间顺序往前寻找，然后取出第一个找到的文件版本，每一个文件都用同样的方式处理。

- **如果要取出 Git 仓库中全部文件的最新内容，执行 “git checkout .” 命令**

- **找出包含某一个字符串的文件，使用 “git grep” 指令, 它的格式如下: `git grep '要找的字符串' commit节点`，如果没有指定 commit 节点，表示要搜索文件夹中所有的文件。该指令默认区分英文大小写，如果不要区分英文大小写，可以加上 “-i” 选项。如果只要累出包含该字符串的文件，可以加上 “-l” 选项，如果想知道每一个文件中有几行含有该字符串，可以换成使用 “-c” 选项，如果搜索的字符串不止一个，可以使用 “-e” 选项分别制定字符串，格式如下：`git grep '要找的字符串`' -e '要找的字符串2' commit节点`，这些字符串默认是以 or 的方式结合，也就是说，只要出现其中一个，就算符合条件。如果要限制所有的字符串都必须出现才算数，可以用 “--and” 选项把它们结合起来，如下：`git grep '要找的字符串1' --and '要找的字符串2' commit节点`，and 和 or 的结合还可以混用，甚至加上括号如下：`git grep -e '找着的字符串1' --and \(-e '要找的字符串2' -e '要找的字符串3'\) commit节点`**

- **如果想要知道文件中每一行最后是由谁修改，可以执行 “git blame 文件名” 指令。如果文件太长，可以使用 “-L” 选项指定从哪一行开始到哪一行结尾。如下：**
  
  `git blame -L 起始行,结束行 文件名` <-- 显示从起始行到结束行的数据
  
  `git blame -L 起始行, 文件名` <-- 显示从起始行到文件最后一行的数据

  `git blame -L,结束行, 文件名` <-- 显示从文件开始到结束行的数据











